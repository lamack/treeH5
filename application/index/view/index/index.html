<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>首页</title>
    <link rel="stylesheet" type="text/css" href="{$static_dir}home/css/reset.css">
    <link rel="stylesheet" type="text/css" href="{$static_dir}home/css/index.css">
</head>

<body>
    <div class="container">
        <div class="blur_container hei">
            <div class="blur_bg"></div>
            <div class="blur_box none">
                <div class="item_row flex flex-justify-arround">
                    <div class="">
                        <img src="{$static_dir}home/img/green.png">
                        <p class="">{$_MEMBER.green_max|default=0}</p>
                    </div>
                    <div class="">
                        <img src="{$static_dir}home/img/dui.png">
                        <p class="">{$_MEMBER.green|default=0}</p>
                    </div>
                    <div class="">
                        <img src="{$static_dir}home/img/budui.png">
                        <p class="">{$_MEMBER.green_nocash|default=0}</p>
                    </div>
                    <div class="">
                        <img src="{$static_dir}home/img/hsf2.png">
                        <p class="">{$_MEMBER.share|default=0}</p>
                    </div>
                    <div class="">
                        <img src="{$static_dir}home/img/bigtree.png">
                        <p class="">{$count|default=1}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="bomb">
            <div class="title">道具使用</div>
            <div class="close"></div>
            <div class="bomb-box">
                <div class="middle clearfix">
                    请选择使用或者兑换工具
                </div>
                <div class="bottom">
                    <div class="status">
                        <div class="use btn">使用</div>
                        <div class="exchange btn">兑换</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tree">
            <div class="gethudun"><img src="{$static_dir}home/img/hudun1.png" /></div>
            <div class="old tree-box"><img src="{$static_dir}home/img/oldtree.png"></div>
            <div class="grow tree-box"><img src="{$static_dir}home/img/growtree.png"></div>
            <div class="child tree-box active"><img src="{$static_dir}home/img/childtree.png"></div>
            <!-- <div class="qipao">
                <div class="life-num">80</div>
                <div class="chengzhang">成长值</div>
                <div class="add move">+10</div>
                <div class="minus move">-10</div>
            </div> -->
        </div>
        <div class="blur_container col">
            <div class="blur_bg"></div>
            <div class="blur_box flex flex-col flex-justify-arround">
                <div class="item_col flex-1">
                    <a href="{:url('Adv/index')}" class="flex flex-align">
                        <div class="center">
                            <img src="{$static_dir}home/img/notice.png"> 公告
                        </div>
                    </a>
                </div>
                <div class="item_col flex-1">
                    <a href="{:url('TreesMap/index')}" class="flex flex-align">
                        <div class="center">
                            <img src="{$static_dir}home/img/mapicon.png"> 地图
                        </div>
                    </a>
                </div>
                <div class="item_col flex-1">
                    <a href="{:url('Task/index')}" class="flex flex-align">
                        <div class="center">
                            <img src="{$static_dir}home/img/taskicon.png"> 赚绿植
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <div class="planting flex">
            <div class="planting-item flex-1 flex flex-justify-arround flex-align">
                <div class="item watering">
                    <div class="water act">
                        <img src="{$static_dir}home/img/water.png" class="water1">
                        <img src="{$static_dir}home/img/water2.png" class="water2">
                    </div>
                    <img src="{$static_dir}home/img/water.png"> x
                    <span class="num">{$waterprop|default=0}</span>
                    <div class="add1 one">+1</div>
                    <div class="minus1 one">-1</div>
                </div>
                <div class="item cutting">
                    <div class="cut act">
                        <img src="{$static_dir}home/img/cut.png" class="cut1">
                        <img src="{$static_dir}home/img/cut2.png" class="cut2">
                    </div>
                    <img src="{$static_dir}home/img/cut.png"> x
                    <span class="num">{$cutprop|default=0}</span>
                    <div class="add1 one">+1</div>
                    <div class="minus1 one">-1</div>
                </div>
                <div class="item feeding">
                    <div class="shifei act">
                        <img src="{$static_dir}home/img/shifei.png" class="shifei1">
                        <img src="{$static_dir}home/img/shifei1.png" class="shifei2">
                    </div>
                    <img src="{$static_dir}home/img/shifei.png"> x
                    <span class="num">{$shifeiprop|default=0}</span>
                    <div class="add1 one">+1</div>
                    <div class="minus1 one">-1</div>
                </div>
                <div class="item defense">
                    <img src="{$static_dir}home/img/hudun.png" class="hudun act">
                    <img src="{$static_dir}home/img/hudun.png"> x
                    <span class="num">{$hudunprop|default=0}</span>
                    <div class="add1 one">+1</div>
                    <div class="minus1 one">-1</div>
                </div>
            </div>
        </div>
        <div id="bottom">
            <div class="topbg"></div>
            <div class="ranking flex">
                <div class="ranking-item active flex-1 self">
                    个人排名
                </div>
                <div class="ranking-item flex-1 banzu">
                    班组排名
                </div>
                <div class="ranking-item flex-1 copm">
                    企业排名
                </div>
                <div class="ranking-item flex-1 area">
                    地区排名
                </div>
            </div>
            <div class="rank-box">
                <div class="rank-box-item active">
                    <div class="self-type flex">
                        <div class="self-type-item flex-1">司机达人</div>
                        <div class="self-type-item flex-1">植树达人</div>
                    </div>
                    <div class="self-type-box active">
                        <div class="rank-list flex self">
                             <div class="rank-num">{$me_rank.rank}</div>
                             <div class="self-icon"><img src=""></div>
                             <div class="self-name flex-1">{$me_rank.name}1</div>
                             <div class="self-num">{$me_rank.green_max}</div>
                         </div>
                         {volist name="person_rank" id="item" }
                            <div class="rank-list flex ">
                                 <div class="rank-num">{$key+1}</div>
                                 <div class="self-icon"><img src=""></div>
                                 <div class="self-name flex-1">{$item.username}</div>
                                 <div class="self-num">{$item.green_max}</div>
                             </div>
                        {/volist} 
                    </div>
                    <div class="self-type-box">
                        <div class="rank-list flex self">
                             <div class="rank-num">{$me_rank.rank}</div>
                             <div class="self-icon"><img src=""></div>
                             <div class="self-name flex-1">{$me_rank.name}</div>
                             <div class="self-num">{$me_rank.green_max}</div>
                         </div>
                         {volist name="driver_rank" id="item" }
                            <div class="rank-list flex ">
                                 <div class="rank-num">{$key+1}</div>
                                 <div class="self-icon"><img src=""></div>
                                 <div class="self-name flex-1">{$item.username}</div>
                                 <div class="self-num">{$item.green_max}</div>
                             </div>
                        {/volist} 
                    </div>
                </div>
                <div class="rank-box-item">
                   <div class="self-type flex">
                        <div class="self-type-item flex-1">排行榜</div>
                    </div>
                    <div class="self-type-box active">
                        {volist name="class_rank" id="item" }
                            <div class="rank-list flex ">
                                 <div class="rank-num">{$key+1}</div>
                                 <div class="self-icon"><img src=""></div>
                                 <div class="self-name flex-1">{$item.class}</div>
                                 <div class="self-num">{$item.max}</div>
                             </div>
                        {/volist} 
                    </div>
                </div>
                <div class="rank-box-item">
                    <div class="self-type flex">
                        <div class="self-type-item flex-1">排行榜</div>
                    </div>
                    <div class="self-type-box active">
                        {volist name="company_rank" id="item" }
                            <div class="rank-list flex ">
                                 <div class="rank-num">{$key+1}</div>
                                 <div class="self-icon"><img src=""></div>
                                 <div class="self-name flex-1">{$item.company}</div>
                                 <div class="self-num">{$item.max}</div>
                             </div>
                        {/volist} 
                    </div>
                </div>
                <div class="rank-box-item">
                    <div class="self-type flex">
                        <div class="self-type-item flex-1">区域</div>
                        <div class="self-type-item flex-1">产业局</div>
                    </div>
                    <div class="self-type-box active">
                        {volist name="area_rank" id="item" }
                            <div class="rank-list flex ">
                                 <div class="rank-num">{$key+1}</div>
                                 <div class="self-icon"><img src=""></div>
                                 <div class="self-name flex-1">{$item.area}</div>
                                 <div class="self-num">{$item.max}</div>
                             </div>
                        {/volist} 
                    </div>
                    <div class="self-type-box">66s</div>
                </div>
            </div>
        </div>
        <div class="hsf">
            <a href="javascript:;" class="">
                <img src="{$static_dir}home/img/hsf1.png">
                红色寻访
         </a>
        </div>
        <div class="me">
            <a href="{:url('Me/index')}" class="">
                <img src="{$static_dir}home/img/self.png">
                <p>{$_MEMBER.username}</p>
         </a>
        </div>
        <div class="disaster">
            <div class="hongshui">
                <img src="{$static_dir}home/img/hongshui1.png">
                <div class="inline"></div>
                <img src="{$static_dir}home/img/hongshui2.png">
            </div>
            <div class="cloud">
                <img src="{$static_dir}home/img/cloud.png">
            </div>
            <div class="ganhan"></div>
            <div class="taifeng">
                <img src="{$static_dir}home/img/taifeng.png">
            </div>
        </div>
        <div class="lunbo">
            <div class="lunbobg"></div>
            <div class="lunbobox">
                <div class="lunbo-container">
                    1.你好我符合双方计划来看2.还是减肥海景房hi3.武将半年时间考虑对4.方会我刘根据客户发生5.的风格留，的施肥hi厉害了
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="{$static_dir}home/js/zepto.js"></script>
    <script type="text/javascript" src="{$static_dir}home/js/public.js"></script>
    <script type="text/javascript" src="{$static_dir}home/js/touch.js"></script>
    <script type="text/javascript" src="{$static_dir}home/js/index.js"></script>
    <script type="text/javascript">
         //灾难来袭
    var Disaster = {
        hongshui:$('.hongshui'),
        ganhan:$('.ganhan'),
        taifeng:$('.taifeng'),
        cloud:$('.cloud'),
        init:function(t){
            //api
            var that = this;
            var baseUrl = "{:url('Index/prop')}";
            console.log(baseUrl);
            var disasterArr = '{$disaster|json_encode}';
                disasterArr = JSON.parse(disasterArr);
            if (disasterArr) {
                $.get(baseUrl,{'prop_type':'4','disaster_id':disasterArr.id},function(rs){
                    if (rs.data.status=='succ') {
                        switch (disasterArr.disaster_type){
                            case 0:
                            that.taifengcom();
                            that.hudun();
                            break;
                            case 1:
                            that.hongshuicom();
                            that.hudun();
                            break;
                            case 2:
                            that.gnahancom();
                            that.hudun();
                            break;
                        }
                            
                    } else {
                        switch (disasterArr.disaster_type){
                            case 0:
                            that.taifengcom();
                            break;
                            case 1:
                            that.hongshuicom();
                            break;
                            case 2:
                            that.gnahancom();
                            break;
                        }
                            
                    }
                })
                
            }
            
        },
        hongshuicom:function(){
            this.hongshui.show();   
            this.cloud.show();
            //this.hudun();
        },
        gnahancom:function(){
            var that = this;
            this.ganhan.addClass('active')
            setTimeout(function(){
                // that.hudun();
            },4000)
        },
        taifengcom:function(){
            var that = this;
            this.taifeng.addClass('active')
            // that.hudun();
            setTimeout(function(){
                that.taifeng.removeClass('active')
            },8000)
        },
        hudun:function(){
            var that = this;
            //护盾激活效果
            $('.hudun').addClass('active')
            Handlecount.minus(3);
            //护盾运动效果
            $('.gethudun').addClass('active')
            //护盾效果结束
            setTimeout(function(){
                $('.hudun').removeClass('active')
                $('.gethudun').removeClass('active')
                that.hongshui.hide();
                that.cloud.hide();
            },4000)
        }
    }
    Disaster.init();
    </script>
</body>

</html>